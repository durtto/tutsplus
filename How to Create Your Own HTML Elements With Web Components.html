<h1>Como Criar Seus Próprios Componentes HTML Com Componentes Web</h1>

<p>Os Web Componentes tem sido considerados "<a href="http://webcomponents.org/" rel="external" target="_blank">uma futura grande mudança de paradigma para o desenvolvimento web</a>", com a promessa de alterar, permanentemente, o panorama do design para web. Os grandes nomes da web tem se movimentado para tornar os web componentes em realidade. Tanto o Google quanto a Mozilla tem, gradativamente, trazido suporte nativo.</p>

<p>Você deve estar se perguntando o que são componentes web, certo? Resumindo, os componentes web permitem criar elementos HTML customizados que podem realizar qualquer tarefa que você quiser que eles façam. Ao invés de encher seu site com marcação verbosa, scripts gigantesco e código repetitivo, você envolve tudo em um simples e único elemento HTML customizado.</p>

<h2>Entendendo os Componentes Web</h2>

<p>A maneira mais fácil de entendermos como os componentes web permitem elementos HTML customizado, é olhando um elemento já existente, e que conhecemos do HTML5: a tag <code class="inline">&lt;video&gt;</code>. Usando esse elemento você pode adicionar um vídeo com algumas poucas linahs de código, como por exemplo:</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/53/posts/21524/image/videoelement.png" />
</figure>

<p>Você pode até estar vendo poucas linhas de HTML, mas, eis o que o elemento
<code class="inline">&lt;video&gt;</code> se parece, por trás dos panos:<br /></p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/53/posts/21524/image/videoshadowdom.png" />
</figure>

<p>Por padrão, o navegador esconde todo esse código para que você não precise vê-lo ou escrevê-lo todo quando quiser adicionar algum vídeo em seus aplicativos web. Você, simplesmente, mexe com suas tags <code class="inline">&lt;video&gt;</code> e <code class="inline">&lt;source&gt;</code>, e tudo funciona perfeitamente. </p>

<p>Antigamente, só fabricantes de navegadores podiam criar elementos dessa forma. Imagine, agora, se você pudesse usar essa mesma abordagem com outros tipos de conteúdo? </p>

<p>Imagine um <em>slideshow</em> de imagens, por exemplo. Normalmente, você precisaria de várias <code>div</code>s aninhadas, usando classes específicas para lidar com o <em>slideshow</em>, cada slide, adição de legenda e miniaturas. Tería, ainda, de prover valores padrões de opções para efeitos de transição através de algum JavaScript em linha.</p>

<p>E se você pudesse evitar tudo isso e só usar assim:</p>

<pre class="brush: html">&lt;slide-show transition="fade"&gt;
&lt;slide src="slideone.jpg" thumb="slideone_thumb.jpg" caption="Look at this image"&gt;
&lt;slide src="slidetwo.jpg" thumb="slidetwo_thumb.jpg" caption="Look at this other image"&gt;
&lt;/slide-show&gt;</pre>

<p>Com os componentes web, você pode!. <br /></p>

<h2>Criando Seus Próprios Elementos HTML</h2>

<p>Se quisermos prover um elemento conciso e fácil de interagir e implantar que, de outros modos, seria bem complicado de implementar, podemos criar nossos próprios componentes web.</p>

<p>Componentes web também podem ser, facilmente, compartilhados, então, assim que os desenvolvedores entrarem de cabeça, há uma grande chance de você só precisar procurar por algum componente pré-feito. Para falar a verdade, já vemos vários componentes disponíveis, gratuitamente, para variadas necessidades, desde o <a href="http://zenorocha.github.io/voice-elements/" rel="external" target="_blank">reconhecimento de voz</a>.. </p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21524/image/voice.png" />
</figure>

<p>aos <a href="http://viniciusalmeida.github.io/ninja-presentation/#1" rel="external" target="_blank">construtores de apresentação</a>..<br /></p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21524/image/ninja.png" />
</figure>

<p> passado pelos <a href="http://educastellano.github.io/qr-code/" rel="external" target="_blank">geradores de QR code</a>.<br /></p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21524/image/qr.png" />
</figure>

<p>Que tal darmos uma olhada por trás do que os componentes web?</p>

<h2>A Constituição de Um Componente Web</h2>

<p>Os componentes web, na forma atual, são constituídos de quatro partes:</p>

<ul>
  <li>Elementos Customizados (Custom Elements)</li>
  <li>DOM Sombra (Shadow DOM)</li>
  <li>Modelos (Templates)</li>
  <li>Importação HTML (HTML Imports)</li>
</ul>

<h3>Custom Elements</h3>

<p>Elementos customizados são exatamente o que parecem: elementos que podem ser nomeados como você quiser e operar a seu gosto. E quando digo de qualquer maneira, é isso mesmo. Por exemplo, apresento-lhes o elemento <code class="inline">&lt;x-gangnam-style&gt;</code>:</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/53/posts/21524/image/gangnam.gif" />
  <figcaption><a href="http://html5-demos.appspot.com/gangnam" rel="external" target="_blank">Demonstração</a> - passe o mouse sobre a barra</figcaption>
</figure>

<p>Elementos customizados são declarados, em sua forma mais simples, parecido com isso:</p>

<pre class="brush: html">&lt;element name="x-gangnam-style"&gt;
...
&lt;/element&gt;</pre>

<p>Quando você cria um elemento customizado, pode criá-lo do zero ou pode extender algum elemento HTML existente, como, por exemplo, o <code class="inline">&lt;button&gt;</code> e fornecer uma funcionalidade ou apresentação modificada que precisar.</p>

<pre class="brush: html">&lt;element name="custom-button" extends="button"&gt;
...
&lt;/element&gt;</pre>

<p><b>Nota</b>: é interessante apontar que a tag <code class="inline">&lt;element&gt;</code> <a href="http://www.html5rocks.com/en/tutorials/webcomponents/customelements/#historysupport" target="_self">foi tornada obsoleta em 2013</a> por complicações. Ela pode retornar, mas, nesse meio tempo, há opções de implementação dela, que falaremos em alguns minutos.Obrigado ao <a href="https://twitter.com/addyosmani" target="_self">Addy Osmani</a> por explicar essa situação!</p>

<h3>Shadow DOM</h3>

<p>A Shadow DOM é o aspecto fundamental do funcionamento dos componentes web. No começo, nós vimos sobre o elemento <code class="inline">&lt;video&gt;</code> do HTML5 e mostramos como, apesar de vermos apenas algumas linhas de código, há muito mais código escondido por padrão. O lugar onde esse código escondido vive é chamado de "Shadow DOM".</p>

<p>Fabricantes de navegadores tem usado essa DOM Sombra por anos para implementar, nativamente, elementos como o <code>input</code>, <code>audio</code>, <code>video</code> e outros. Através dos componentes web, ela pode ser utilizada por qualquer desenvolvedor, agora.</p>

<p>A ideia básica é que você pegar todo o código que não precisa ser visto no posicionamento da marcação e escondê-lo usando a DOM Sombra, de forma que ele não fique no seu caminho. Isso permite você lidar, somente, com dados que ajustam o elemento, como a altura, largura e caminho dos arquivos de vídeo ao usarmos o elemento <code class="inline">&lt;video&gt;</code>.</p>

<p>Uma das coisas mais legais de se trabalhar com a DOM Sombra é que cada instância é auto-contida. Assim, se você usa folhas de estilo e códigos JavaScript dentro do elemento, eles não vazarão, acidentalmente, e ñão afetarão qualquer outra coisa na página. </p>

<p>Reciprocamente, CSS e JavaScript que estiver em qualquer lugar da sua página, não afetarão seu componente web, exceto aquelas que foram criadas especificamentes para estilizar e interagir com ele. Isso significa que não precisará criar um espaço de nome em seus IDs e classes CSS para evitar conflito.</p>

<p>Se quiser ver como a DOM Sombra parece, é bem fácil. Certifique-se que está com uma versão atualizada do Chrome e abra as Ferramentas de Desenvolvedor (Dev Tools). Clique no ícone de roda dentada para abrir as configurações e marque a caixa rotulada <b>Show user agent shadow DOM</b>:</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/53/posts/21524/image/showshadowdom.png" />
</figure>

<p>Então, quando inspecionar qualquer elemento com a DOM Sombra, você verá o código fonte completo. Tente inspecionar o elemento <code class="inline">&lt;x-gangnam-style&gt;</code> com e sem a DOM Sombra: <a href="http://html5-demos.appspot.com/gangnam">http://html5-demos.appspot.com/gangnam</a></p>

<p>Para uma explicação completa sobre a DOM Sombra, veja: <a href="http://code.tutsplus.com/tutorials/intro-to-shadow-dom--net-34966" rel="external" target="_blank">Introdução à DOM Sombra</a></p>

<h3>Modelos</h3>

<p>Já cobrimos como elementos customizados permitem o foco só na informação pertinente, enquanto o resto do código é obscurecido pela DOM Sombra. Um modelo dentro de um componente web é o que mantém junto todos os elementos presentacionais do código restante em questão.</p>

<p>Como parte integrante do código que definem o componente web, temos as tags <code class="inline">&lt;template&gt;...&lt;/template&gt;</code> e, entre elas, inserimos qualquer HTML e/ou CSS que o componente precisar.</p>

<p>Por exemplo, <a href="https://github.com/ebidel/html5demos/blob/master/html5-demos.appspot.com/static/webcomponents/demos/components/my-components/x-gangnam-style.html" rel="external" target="_blank">veja o código</a> criado para o componente web <code class="inline">&lt;x-gangnam-style&gt;</code>. A tag de abertura <code class="inline">&lt;template&gt;</code> está na linha 4 e a tag de fechamento <code class="inline">&lt;/template&gt;</code> está na linha 201. Entre elas, você verá todo o CSS responsável pela criação, posicionamento e animação, bem como o HTML que posiciona cada uma das imagens envolvidas. </p>

<h3>Imoprtação de HTML</h3>

<p>Importação de HTML permite que você pegue tudo que foi descrito acima e faça funcionar na sua página. Os componente web são definidos dentro de arquivos HTML externos, assim, esse arquivo precisa ser importado para que o elemento customizado funcione. A importação de HTML lida com isso atravé da tag <code class="inline">&lt;link&gt;</code>, que você já deve estar familiar ao usar para importar arquivos CSS externos.</p>

<p>Por exemplo, antes de pode usar o componente web <code class="inline">&lt;x-gangnam-style&gt;</code> você teria de importar o arquivo HTML que o define, dessa forma:</p>

<pre class="brush: html">&lt;link rel="import" href="/components/x-gangnam-style.html"&gt;</pre>

<h2>Suporte dos Navegadores e Implementações Não-Nativas</h2>

<p>As possibilidades oferecidas pelos componentes web tornam a ideia de cair de cabeça neles bastante atraente, porém, nesse momento, o suporte dos navegadores não é muito interessante. O estado atual de suporte aos componentes web parece é mais ou menos esse:</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/53/posts/21524/image/browsersupport.png" />
  <figcaption>
    <a href="http://jonrimmer.github.io/are-we-componentized-yet/">http://jonrimmer.github.io/are-we-componentized-yet/</a>
  </figcaption>
</figure>

<p>O suporte nativo está a caminho por parte do Chrome, Opera e Firefox, porém, não está completo ainda. O IE e o Safari ainda não publicaram seus planos, contudo, é meio difícil que eles não deem suporte, uma vez que a <a href="http://www.w3schools.com/browsers/browsers_stats.asp" rel="external" target="_blank">maioria</a> dos navegadores dará suporte.</p>

<p>Right now, if you want to start working with web components you'll need to use one of the available polyfills. The good news is two of the most popular solutions are created by Google and Mozilla, so we can expect to see some consistency with how native support will ultimately operate.</p>

<h3>Polymer by Google</h3>

<p>It's hard not to lean towards using <a href="http://www.polymer-project.org/" rel="external" target="_blank">Polymer</a> given Chrome is now the most widely used browser, and you might assume consideration will be given during development as to how web component code will be indexed by Google.</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21524/image/polymer.png" />
</figure>

<p>Polymer comes with a full library of prebuilt web components. It includes the "<a href="http://www.polymer-project.org/docs/elements/core-elements.html" rel="external" target="_blank">Polymer Core elements</a>" which are functionally oriented, and the "<a href="http://www.polymer-project.org/docs/elements/paper-elements.html" rel="external" target="_blank">Paper elements</a>" which are design oriented.</p>

<p>When creating custom elements with Polymer, instead of using the format <code class="inline">&lt;element name="..."&gt;</code> you use <code class="inline">&lt;polymer-element name="..."&gt;</code>.</p>

<p>Polymer describes itself as being in "developer preview" rather than absolutely production ready, however they also say </p>

<blockquote>...despite the label many people have already had success using Polymer in production.</blockquote>

<h4>Browser Support</h4>

<ul>
  <li>Chrome Android</li>
  <li>Chrome</li>
  <li>Canary</li>
  <li>Firefox</li>
  <li>IE 10+</li>
  <li>Safari 6+</li>
  <li>Mobile Safari</li>
</ul>

<p>If you need to cater for IE9, which is estimated to hold around <a href="http://www.w3schools.com/browsers/browsers_explorer.asp" rel="external" target="_blank">1.9%</a> to <a href="http://www.w3counter.com/globalstats.php" rel="external" target="_blank">5.11%</a> of market share, unfortunately you're out of luck with Polymer. However, you can still go with Mozilla's X-Tags instead.</p>

<h3>X-Tags by Mozilla</h3>

<p><a href="http://x-tags.org/" rel="external" target="_blank">X-Tags</a> is a JavaScript library created by Mozilla that, currently, has an advantage over Polymer in that its browser support is wider reaching. If that's a major consideration for you X-Tags may be your preference.</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21524/image/x.png" />
</figure>

<h4>Browser Support</h4>

<ul>
  <li>Firefox 5+ desktop &amp; mobile</li>
  <li>Chrome 4+</li>
  <li>Chrome Android 2.1+</li>
  <li>Safari 4+ desktop &amp; mobile</li>
  <li>IE9+</li>
  <li>Opera 11+ desktop &amp; mobile</li>
</ul>

<h3>IE8 Support</h3>

<p>Right now, if you need to support IE8 then unfortunately web components aren't likely to be for you as the available polyfills support IE9+. Estimates are that IE8 users are at around <a href="http://www.w3schools.com/browsers/browsers_explorer.asp" rel="external" target="_blank">2.1%</a> to <a href="http://www.w3counter.com/globalstats.php" rel="external" target="_blank">3.82%</a>, but of course if your own stats say differently you'll have to make a judgement call on how far back your browser support should stretch.</p>

<h2>Ember.js and AngularJS Components</h2>

<p>One possible way you can prepare yourself to transition into using web components is to work with <a href="http://emberjs.com/" rel="external" target="_blank">Ember.js</a> or <a href="https://angularjs.org/" rel="external" target="_blank">AngularJS</a> for the time being. Both have their own systems of component creation and both promise to transition into utilizing native web component code when it becomes fully available.</p>

<h2>Community Created Components</h2>

<ul>
  <li>
    <a href="http://component.kitchen/" rel="external" target="_blank">Component Kitchen</a>
  </li>
  <li>
    <a href="http://customelements.io/" rel="external" target="_blank">Custom Elements</a>
  </li>
  <li>
    <a href="http://bower.io/search/?q=web-components" target="_self">Web Components on Bower</a>
  </li>
</ul>

<h2>Learn More</h2>

<ul>
  <li>
    <a href="http://webcomponents.org/" rel="external" target="_blank">WebComponents.org</a>
  </li>
  <li>
    <a href="https://code.tutsplus.com/tutorials/using-polymer-to-create-web-components--cms-20475" target="_self">Using Polymer to Create Web Components</a>
  </li>
  <li>
    <a href="https://code.tutsplus.com/tutorials/sharing-polymer-components-part-1--cms-21264" target="_self">Sharing Polymer Components: Part 1</a>
  </li>
  <li>
    <a href="https://code.tutsplus.com/tutorials/sharing-polymer-components-part-2--cms-21497" target="_self">Sharing Polymer Components: Part 2</a>
  </li>
  <li>
    <a href="https://developers.google.com/events/io/sessions/318907648" rel="external" target="_blank">Web Components: A Tectonic Shift for Web Development</a>
  </li>
  <li>
    <a href="http://www.w3.org/TR/components-intro/" rel="external" target="_blank">Introduction to Web Components</a>
    <a href="http://code.tutsplus.com/tutorials/intro-to-shadow-dom--net-34966" rel="external" target="_blank">Intro to Shadow DOM</a>
  </li>
</ul>

<h2>Conclusion</h2>

<p>I hope you enjoyed reading this rundown of what web components are and why you should care! There's a lot more to dive into, but with these fundamentals covered, we have plenty of opportunity for tutorials on actually building custom web components. What do you think? Under what circumstances could you see yourself using them?</p>
