<h1>Como Criar um Layout Com Navegação <em>Off-Canvas</em> Usando Bootstrap</h1>

<p>O <a href="http://getbootstrap.com/">Bootstrap</a> é projetado para servir a vários cenários, provendo diversos componentes web úteis. Há botões, barra de navegação responsiva, carrosséis e muitos outros. Ainda assim, mesmo com tudo isso que o Bootstrap nos fornece, ainda falta fornecer um padrão de navegação muito popular: a navegação <em>off-canvas</em>.</p>

<p>Essa abordagem para navegação coloca o menu para fora da área visível (a tela - do inglês <em>canvas</em>), focando e dando mais espaço para o conteúdo principal. Navegação <em>off-canvas</em> tornou-se popular, primeiramente, em aplicativos para dispositivos móveis e, só então, tornou-se um padrão usado na web responsiva (graças em parte ao <a href="http://www.lukew.com/ff/entry.asp?1569" target="_self">artigo de Luke Wroblewski</a>). Geralmente, lança mão do jQuery para ativar ou desativar a navegação.</p>

<p>Falando nisso, o Bootstrap sendo tão popular e com o ótimo suporte da comunidade, os desenvolvedores criaram <em>plugins</em> e extensões para incluir componentes que não estão disponíveis no Bootstrap <i>oficial</i>. Entre eles, temos uma implementação para a navegação <em>off-canvas</em>.</p>

<p>Nesse tutorial, mostrarei como adicionar uma navegação <em>off-canvas</em> usando uma extensão chamada <a href="http://jasny.github.io/bootstrap/">Jasny Bootstrap</a>, criada por Arnold Daniels. Os dois motivos para essa escolha são:</p>

<ul>
  <li>Como o nome implica, é específica para o Bootstrap. Assim, o código condiz com o código encontrado no Bootstrap. Ele segue as mesmas convenções de nomeação e de implementação dos componentes.</li>
  <li>Jasny Bootstrap vem com o <em>plugin</em> de navegação <em>Off-canvas</em> bastante flexível e configurável através de uma série de classes, atributos HTML5 ou através do JavaScript.</li>
</ul>

<h3>Um Pouco Sobre o Bower</h3>

<p>Por esse tutorial, apresentarei um fluxo de trabalho que auxilia na manutenção de um website, usando o <a href="http://bower.io/">Bower</a>. Então, tenha certeza de tê-lo instalado no seu sistema. Se não quiser usá-lo, tudo bem. Contudo, para iniciá-lo a essa ferramenta, já publicamos alguns tutoriais para iniciantes.</p>

<ul>
  <li><a href="http://code.tutsplus.com/tutorials/meet-bower-a-package-manager-for-the-web--net-27774">Conheça o Bower: Um Gerenciador de Pacotes para a Web</a></li>
  <li><a href="https://webdesign.tutsplus.com/tutorials/quick-tip-what-to-do-when-you-encounter-a-bower-file--cms-21162">Dica Rápida: O Que Fazer Quanto Encontrar Um Arquivo do Bower</a></li>
  <li><a href="https://webdesign.tutsplus.com/courses/essential-js-libraries-for-web-design" target="_self">Bibliotecas JavaScript Essenciais para Web Design</a> (um curso do Tuts+)</li>
</ul>

<p>Pois bem, vamos lá.</p>

<h2><span class="sectionnum">1.</span> Começando</h2>

<p>Comecemos o projeto criando o diretório que usaremos para guardar os arquivos necessários.</p>

<pre class="brush: bash">working-dir
|-- assets
|   |-- css
|   |-- img
|   `-- js
`-- sources
|-- js
    `-- less
</pre>

<p>Nós usaremos o diretório <b>assets</b> para guardar os arquivos de imagens, folhas de estilo, JavaScript e coisas do tipo. O diretório <b>sources</b> será o local onde colocaremos os arquivos LESS e JavaScript <em>não compilados</em>. Além disso, definiremos as especificações do projeto — nome, versão, dependências e outras coisas — com Bower.</p>

<p>Execute o comando <code>bower init</code> dentro do diretório e preencha todas as requisições que aparecerem.</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21991/image/bower-init-prompts.jpg"/>
  <figcaption>Um exemplo de entradas para o comando "bower init"</figcaption>
</figure>

<p>Você não precisa seguir à risca as entradas mostradas acima. Ajuste-as de acordo com seus requisitos. Uma vez finalizado, um novo arquivo, <code>bower.json</code>, deve aparecer no diretório, contendo as especificações do projeto que acabamos de preencher.</p>

<h2><span class="sectionnum">2.</span> Instalando as Dependências do Projeto</h2>

<p>Esse projeto requer duas <em>frameworks</em>: Bootstrap e Jasny Bootstrap. Antes de instalá-las, especifiquemos onde o Bower deve instalar os pacotes. Para tanto, crie um novo, <code>.bowerrc</code>, na pasta raiz do diretório e coloque o trecho a seguir dentro dele, para indicar o diretório.</p>

<pre class="brush: bash">{
	"directory": "components"
}
</pre>

<p>Agora, inclua as linhas abaixo, dentro do arquivo <code>bower.json</code>. Elas indicam ao Bower que o projeto tem como dependências o Bootstrap e a Jasny Bootstrap versão 3.1.1 ou mais novos.</p>

<pre class="brush: bash">"devDependencies": {
"bootstrap": "&gt;=3.1.1",
    "jasny-bootstrap": "&gt;=3.1.1"
}
</pre>

<p>Na Linha de Comando, execute o comando <code>bower install</code> para obter todas as dependências especificadas.</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21991/image/bower-install-commands.jpg"/>
</figure>

<p>Como indicado no arquivo <code>.bowerrc</code>, as dependências do projeto devem estar, agora, no novo diretório chamado <code>components</code>.</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21991/image/project-dependencies.jpg"/>
</figure>

<h2><span class="sectionnum">3.</span> Organizando as Folhas de Estilo</h2>

<p>Com todas as dependências prontas, podemos trabalhar no nosso projeto! Começaremos organizando as folhas de estilo. Teremos de criar quatro folhas de estilo com LESS, que são:</p>

<ul>
  <li><code>variables.less</code> — como o nome indica, essa folha de estilo contem as variáveis usadas pelo Bootstrap. Criaremos essa cópia caso queiramos customizar o Bootstrap sem afetar os arquivos originais (copie <a href="http://git.io/iiGDuA">as variáveis do Bootstrap desse Gist</a>).</li>
  <li><code>variables-jasny.less</code> — de forma similar, essa folha de estilo contem as variáveis usadas na extensão Jasny Bootstrap (copie <a href="http://git.io/HvCouw">as variáveis daqui</a>).</li>
  <li><code>app.less</code> — essa folha de estilo contém referências às folhas de estilo do Bootstrap e da Jasny Bootstrap que precisamos para construir o site (você pode <a href="http://git.io/9yTa7A">copiar o conteúdo aqui</a>).</li>
  <li><code>style.less</code> — escreveremos nossos estilos nessa folha de estilo.</li>
</ul>

<p>Crie e coloque-os juntos, dessa forma:</p>

<pre class="brush: bash">...
`-- sources
	|-- js
	`-- less
		|-- app.less
		|-- style.less
		|-- variables-jasny.less
		`-- variables.less
</pre>

<p>O próximo passo é compilar essas folhas de estilo. Para isso, usaremos o aplicativo <a href="http://koala-app.com/">Koala</a>, com as seguintes configurações:</p>

<ul>
  <li>Tenha certeza que a opção <strong>Auto Compilar</strong> está marcada. Dessa forma, o Koala compilará, imediatamente, os arquivos LESS em CSS, sempre que houver alguma mudança.</li>
  <li>Configure o destino do retorno de <code>app.less</code>, bem como de <code>style.less</code>, para o diretório <code>assets/css/</code>.</li>
  <li>Selecione a opção de <b>Source Map</b> para gerar os arquivos <code>.map</code> para facilitar a depuração das folhas de estilo. Se essa é a primeira vez em que ouve falar de <em>Source Map</em>, veja nosso tutorial no Tuts+ Code, o <a href="https://code.tutsplus.com/tutorials/source-maps-101--net-29173">Source Map 101</a>.</li>
</ul>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21991/image/koala-config.jpg"/>
</figure>

<p>Uma vez que a configuração esteja pronta, compile os arquivos LESS em CSS.</p>

<p><b>Nota</b>: tenha em mente que você não é obrigado a usar o Koala. Use seu meio preferido de compilar arquivos LESS. </p>

<h2><span class="sectionnum">4.</span> Construindo a Página</h2>

<p>Crie um novo arquivo HTML chamado <code>index.html</code>. Além da estrutura básica com elementos HTML5, o arquivo <code>index.html</code> também contém <a href="https://webdesign.tutsplus.com/articles/quick-tip-dont-forget-the-viewport-meta-tag--webdesign-5972">a <em>meta viewport</em></a>, a <em>meta description</em>, a <em>tag</em> title, e os <em>links</em> para as folhas de estilo, assim:</p>

<pre class="brush: html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
	&lt;meta name="description" content="Uma demonstração de como criar um menu <em>Off-canvas</em> para o Bootstrap com Jasny Bootstrap"&gt;
	&lt;title&gt;Navegação <em>Off-canvas</em> para o Bootstrap&lt;/title&gt;

	&lt;link href="assets/css/app.css" rel="stylesheet"&gt;
&lt;link href="assets/css/style.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>

<h3>A Navegação <em>Off-canvas</em></h3>

<p>É hora de adicionar a navegação <em>Off-canvas</em>. A Jasny Bootstrap usa uma abordagem similar a do Bootstrap quando se trata em código de componente. É assim que começamos a implementar a estrutura da navegação <em>Off-canvas</em>:</p>

<pre class="brush: html">&lt;nav id="offcanvas" class="navmenu navmenu-inverse navmenu-fixed-right navmenu-site offcanvas" role="navigation"&gt;
&lt;/nav&gt;
</pre>

<p>Ela inclui várias classes úteis. Três classes chamadas de <code>navmenu</code>, <code>navmenu-inverse</code> e <code>navmenu-fixed-right</code> definem o elemento como um <b>navmenu</b>. O <b>navmenu</b> é um dos componentes do Jasny Bootstrap que configura o elemento em questão como uma navegação vertical. A <code>offcanvas</code> é uma classe que configura o elemento para fora da área de visualização. Adicionalmente, também adicionamos uma nova classe, <code>navmenu-site</code>, que nos permitirá customizar a navegação com nossos próprios estilos.</p>

<p>Os itens do menu da navegação <em>Off-canvas</em> podem ser criados usando o elemento <code>&lt;ul&gt;</code> com as classes <code>nav navmenu-nav</code>, dessa forma.</p>

<pre class="brush: html">&lt;nav id="offcanvas" class="navmenu navmenu-inverse navmenu-fixed-right navmenu-site offcanvas" role="navigation"&gt;
	&lt;ul&gt;
		&lt;li&gt;&lt;a href="#"&gt;Home&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href="#"&gt;Blog&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href="#"&gt;Portfolio&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
&lt;/nav&gt;
</pre>

<p>Você tem a liberdade de incluir componentes originais do Bootstrap junto desse código, como <a href="http://getbootstrap.com/components/#dropdowns">os Menus Suspensos</a> e <a href="http://getbootstrap.com/components/#navbar-buttons">os Botões</a>. </p>

<p>Adicionaremos nesse tutorial um trecho HTML para a navegação que é bem longo. Assim, para facilitar, o código completo pode ser obtido através <strong><a href="https://gist.github.com/tfirdaus/30209c703e4c4457f520">desse Gist</a>.</strong></p>

<h3>O Conteúdo da Página</h3>

<p>A imagem a seguir mostra nossos planos sobre como posicionaremos o conteúdo da página:</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21991/image/website-content-blueprint.jpg"/>
  <figcaption>O diagrama da página, mostrando o <em>layout</em>.</figcaption>
   
</figure>

<p>Como mostrado acima, o conteúdo do site compreende a logo, o botão de ativação da navegação, <a href="https://webdesign.tutsplus.com/tutorials/7-non-raster-approaches-for-making-the-Hambúrguer-menu-icon--cms-21686">em forma de "Hambúrguer"</a> e algumas linhas de frases chamativas com um botão gigantesco — conhecido como <a href="http://www.smashingmagazine.com/2009/10/13/call-to-action-buttons-examples-and-best-practices/">botão de ação</a> (<em>call to action</em>, em inglês)</p>

<p>O trecho HTML do conteúdo também é bem longo para ser colocado nesse tutorial. Ao invés disso, sinta-se a vontade de copiá-lo por inteiro <strong><a href="https://gist.github.com/tfirdaus/5bac75b93257852992b0">desse Gist</a></strong>.</p>

<h2><span class="sectionnum">5.</span> Os Estilos</h2>

<p>Muitos dos estilos presentes na página serão, meramente, decorativos, tratando apenas de cores, tamanhos e posicionamentos. Esse estilo decorativo será obtido através da customização dos estilos pré-definidos do Bootstrap, bem como da escrita dos nossos próprios estilos. Assim, ao invés de passar por pontos que talvez sejam bastante óbvios, gostaria de apontar alguns detalhes que são mais importantes.</p>

<p>Antes de tudo, antes até de escrever uma linha de código sequer, importe a folha de estilo <code>app.less</code> para dentro da <code>style.less</code>. Isso nos permite reusar as Variáveis e <em>Mixins</em> dentro dela.</p>

<pre class="brush: css">@import (reference) 'app.less';
</pre>

<p>Depois, criaremos uma variável LESS para definir o caminho das imagens. Nomearemos essa variável de <code>@path-img</code>.</p>

<pre class="brush: css">@path-img: '../../assets/img/';
</pre>

<p>Toda vez que precisarmos nos referir a uma imagem dentro de nossas folhas de estilo, incluiremos essa variável. O exemplo abaixo mostra como a usamos para apontar para a logo.</p>

<pre class="brush: css">.masthead-brand {
margin-top: 10px;
    margin-bottom: 10px;
    float: left;
    text-align: left;
    margin-top: -15px;
    a {
        .text-hide();
        display: inline-block;
        background-image: url('@{path-img}logo.png');
        background-repeat: no-repeat;
        background-size: 100% 100%;
        width: 100px;
        height: 33px;
    }
}
</pre>

<h3>Centralização Vertical</h3>

<p>Por último, centralizaremos verticalmente o conteúdo, as frases de efeito e o botão. O CSS, até agora, ainda não nos proporcionou uma forma conveniente para alinhar conteúdos verticalmente usando apenas uma única propriedade. Consequentemente, há inúmeras maneiras que poder usar e, honestamente, nenhuma é melhor que a outra.</p>

<p>Nesse caso, alinharemos o conteúdo usando o método <em>CSS Table</em>. Se olhar o código fonte da página, verá que envolvemos o conteúdo dela em duas <code>&lt;div&gt;</code>. Cada <code>&lt;div&gt;</code> foi atribuída uma classe, <code>site-wrapper</code> e <code>site-wrapper-inner</code>, respectivamente.</p>

<pre class="brush: css">&lt;div class="site-wrapper"&gt;
	&lt;div class="site-wrapper-inner"&gt;
	...
	&lt;/div&gt;
&lt;/div&gt;
</pre>

<p>Para alinhar o conteúdo verticalmente, configuraremos a propriedade <code>display</code> de <code>site-wrapper</code> para <code>table</code> e faremos com que ela tome todo tamanho da área visível, configurando as propriedades <code>width</code> e <code>height</code> para o valor de <code>100%</code>. Então, configuraremos a propriedade <code>display</code> da <code>div</code> interna como <code>table-cell</code>. Isso nos permitirá aplicar a propriedade <code>vertical-align</code> para alinhar o conteúdo verticalmente.</p>

<pre class="brush: css">.site-wrapper {
display: table;
    width: 100%;
    height: 100%;
    min-height: 100%;
}
.site-wrapper-inner {
    display: table-cell;
    vertical-align: middle;
}
</pre>

<p>Detalhes completos sobre os estilos podem ser obtidos <strong><a href="https://gist.github.com/tfirdaus/c45274dbbcde70c0b1fd">nesse Gist</a></strong>.</p>

<h2><span class="sectionnum">6.</span> Dê Vida à Página</h2>

<p>Assim que adicionarmos os estilos, a página estará parecida com a captura de tela abaixo:</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21991/image/website-appearance.jpg"/>
</figure>

<p>Entretanto, o site ainda não está totalmente funcional. Tente clicar no ícone de "Hambúrguer"; a navegação <em>Off-canvas</em> não surge. Essa funcionalidade vem a partir da biblioteca JavaScript, logo, temos de compilá-lo e adicioná-la ao site.</p>

<p>Precisamos de quatro bibliotecas JavaScript para usar a navegação <em>Off-canvas</em>, que são: <i>jQuery</i>, <i>transition.js</i> e <i>dropdown.js</i> para habilitar o menu suspenso que adicionamos na navegação; e, por último, o <i>offcanvas.js</i>. Para compilá-los em um único arquivo, criaremos um arquivo JavaScript no diretório <b>source/js</b>. Nesse caso, chamaremos ele de <i>app.js.</i></p>

<pre class="brush: bash">...
`-- sources
	|-- js
	|	`-- app.js
	`-- less
</pre>

<p>Importe as bibliotecas JavaScript usando <code>@koala-prepend</code>, dessa forma:</p>

<pre class="brush: bash">//@koala-prepend "../../components/jquery/dist/jquery.js"
//@koala-prepend "../../components/bootstrap/js/transition.js"
//@koala-prepend "../../components/jasny-bootstrap/js/offcanvas.js"
</pre>

<p>Configure o retorno para o diretório <b>/assets/js</b>, e aperte o botão <b>Compile</b>. Não esqueça de chamar o arquivo final compilado lá em nossa página.</p>

<pre class="brush: html">&lt;script src="assets/js/app.min.js"&gt;&lt;/script&gt;
</pre>

<p>Agora, você deve ser capaz de fazer a navegação <em>off-canvas</em> aparecer e desaparecer. </p>

<h3>Transições</h3>

<p>Você também pode adicionar o seguinte trecho de código JavaScript ao final da página, e ele habilitará os efeitos de transição do menu suspenso.</p>

<pre class="brush: html">&lt;script&gt;
(function() {
var $offCanvas = $('#offcanvas'),
        $dropdown  = $offCanvas.find('.dropdown');
    $dropdown.on('show.bs.dropdown', function() {
        $(this).find('.dropdown-menu').slideDown(350);
    }).on('hide.bs.dropdown', function(){
        $(this).find('.dropdown-menu').slideUp(350);
    });
})();
&lt;/script&gt;
</pre>

<h2>Conclusão</h2>

<p>Nesse tutorial, incluímos uma navegação <em>Off-canvas</em> no Bootstrap usando uma extensão chamada Jasny Bootstrap. </p>

<p>Ao usar Bower nesse tutorial, teremos uma maior facilidade em manter as bibliotecas atualizadas. Depois de um tempo, é provável que elas sejam atualizadas por seus mantenedores. Com o Bower, você pode executar o comando <code>bower list</code> para listar todos os pacotes instalados e verificar se há alguma versão nova para cada um deles.</p>

<figure class="post_image">
  <img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/30/posts/21991/image/bower-list-update.jpg"/>
</figure>

<p>No caso de uma nova versão estar disponível, simplesmente execute o comando <code>bower update</code> ou o <code>bower install</code> para atualizar o pacote. Simples assim.</p>

<p>Espero que tenha aprendido alguns métodos e dicas legais nesse tutorial. Se tiver alguma pergunta, sinta-se à vontade de deixá-las nos comentários.</p>

<h2>Leitura Adicional</h2>

<ul>
  <li><a href="http://www.smashingmagazine.com/2014/02/24/off-the-beaten-canvas-exploring-the-potential-of-the-off-canvas-pattern/">Além da Tela: Explorando o Potencial do Padrão <em>Off-canvas</em></a></li>
  <li><a href="https://webdesign.tutsplus.com/articles/examining-responsive-navigation-off-canvas-patterns--webdesign-11023">Examinando a Navegação Responsiva: Padrões <em>Off Canvas</em></a></li>
  <li><a href="http://bradfrost.github.io/this-is-responsive/patterns.html">Padrões de Design Responsivo</a></li>
  <li><a href="https://webdesign.tutsplus.com/tutorials/going-off-canvas-with-zurb-foundation-30--webdesign-7799">Indo Fora da Tela com Zurb Foundation</a></li>
</ul>