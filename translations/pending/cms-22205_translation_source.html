<h1>Iniciando Com o Intel XDK</h1>

<p>Desenvolvimento para dispositivos móveis utilizando tecnologias web não é novidade. Graças ao PhoneGap e ao Appcelerator Titanium, os desenvolvedores web podem criar aplicativos híbridos com acesso ao <em>hardware</em> dos aparelhos. Uma nova solução para o desenvolvimento com HTML5/CSS/JavaScript é o XDK da Intel. Nesse artigo, mostrarei o porque ele vale a pena.</p>

<p/>

<h2><span class="sectionnum">1.</span> O Que Ele É?</h2>

<p>Se você está envolvido com desenvolvimento móvel, provavelmente já ouviu falar ou usou ferramentas como o <a href="http://phonegap.com/" rel="external" target="_blank">PhoneGap</a> ou o <a href="http://www.appcelerator.com/titanium/" rel="external" target="_blank">Appcelerator Titanium</a>. Essas ferramentas permitem os desenvolvedores web usarem suas perícias para criar aplicativos móveis híbridos.</p>

<p>Ano passado, a <a href="http://www.intel.com/content/www/us/en/homepage.html" rel="external" target="_blank">Intel</a> comprou a <a href="http://www.appmobi.com/" rel="external" target="_blank">appMobi</a> e integrou suas ferramentas ao <a href="http://xdk-software.intel.com/" rel="external" target="_blank">Intel XDK</a>. Esse produto unificado e simplificado é um ferramental completo para desenvolvimento móvel. Um desenvolvedor pode sair de algumas poucas linhas de código para uma aplicação totalmente compilada em um único conjunto de ferramentas. E o melhor de tudo, o XDK é gratuito para baixar.</p>

<h2><span class="sectionnum">2.</span> Funcionalidades</h2>

<p>A primeira coisa que você perceberá sobre o XDK é o quão fácil ele é de instalar. O PhoneGap requer bastante configuração e o Titanium precisa de requerimentos específicos em relação a bibliotecas instaladas. Para começar com o XDK, você só o baixa e instala.</p>

<p>A beleza do XDK está em permitir você criar aplicações para qualquer plataforma. Com outras ferramentas, você está limitado à plataforma em que você está desenvolvendo. Assim, uma vez que a Apple não permitirá o Xcode ser executado em máquinas que não sejam Mac OS X, você deverá possuir um Mac para desenvolver para o iOS.</p>

<p>O Intel XDK permite que você desenvolva para qualquer plataforma, já que a compilação é feita nas nuvens. O PhoneGap oferece um serviço similar para desenvolvimento multi-plataforma, mas é limitado. E com o XDK, você não está limitado às plataformas móveis. Você planeja criar aplicativos para o Chrome, Facebook, Amazon ou Nook? O XDK pode publicar versões para essas plataformas, assim como compilar com o XDK ou a API do <a href="http://cordova.apache.org/" rel="external" target="_blank">Cordova</a> (PhoneGap).</p>

<p>O XDK vem com o editor de código aberto da Adobe, o <a href="http://brackets.io/" rel="external" target="_blank">Brackets</a>. O Titanium tem um editor decente, mas prefiro a solução do XDK. Adicionalmente, você tem acesso a algumas das extensões disponíveis para o Brackets. O único problema é que você não pode atualizar o Brackets que vem integrado ao XDK. Contudo, já é um passo a frente em relação ao Titanium e o PhoneGap sequer vem com um editor embutido.</p>

<p>O XDK também vem com um editor gráfico embutido, que é o que realmente faz falta em todas as plataformas HTML5 para dispositivos móveis. Faz todo sentido dar suporte a componentes HTML em editores <em>WYSIWYG</em>. Ele também dá suporte a <em>frameworks</em> como <a href="http://getbootstrap.com/" rel="external" target="_blank">Bootstrap</a> e <a href="http://jquerymobile.com/" rel="external" target="_blank">jQuery Mobile</a>. Esses componentes de interface do usuário permitem a criação rápida de interfaces para sua aplicação.</p>

<p>Uma vez que seu aplicativo esteja criado, você precisa de uma forma para testar sua funcionalidade. O Intel XDK inclui o melhor emulador de dispositivos móveis que já vi até hoje. Ele tem a capacidade de testar em dispositivos reais e traçar o perfil de performance sem precisar instalar qualquer coisa.</p>

<h2><span class="sectionnum">3.</span> Construindo Um Aplicativo Móvel Com o Intel XDK</h2>

<h3>Passo 1:Baixe e Instale</h3>

<p>Dirija-se até a <a href="http://xdk-software.intel.com/" rel="external" target="_blank">página de download do Intel XDK</a> e baixe a versão mais atual. Ao terminar o download do pacote, instale-o com as opções padrão.</p>

<h3>Passo 2: Crie um Novo Projeto</h3>

<p>Criaremos um pequeno aplicativo de fotos. Inicie o XDK e escolha <strong>Start a New Project</strong>. Algumas das opções que você tem são:</p>

<ul>
  <li><strong>Start with a Demo:</strong> Essa opção permite que você um dos vários projetos de demonstração que a Intel oferece. Isso é bom para facilitar você entender como desenvolver com o XDK.</li>
  <li><strong>Start with a Template</strong><strong>:</strong> Essa opção oferece uma variedade de modelos para vários estilos de interface de usuário. Ela também tem um modelo do Cordova em branco para você iniciar, caso queira.</li>
  <li><strong>Import an Existing HTML5 Project:</strong> Com essa opção, você pode importar um projeto criado fora do XDK, como um projeto do PhoneGap, criado no editor de sua preferência. Ela também permite você importar outros projetos criados com o XDK.</li>
  <li><strong>Use App Starter/Start with App Designer:</strong> O <em>App Starter</em> pode ser considerado uma versão mais simples do <em>App Designer</em>. Ambos são interfaces gráficas para serem usadas junto do editor Brackets. O <em>App Starter</em> usa o <a href="http://app-framework-software.intel.com/" rel="external" target="_blank">App Framework</a>. O <em>App Designer</em> adiciona os <em>frameworks</em> de interface do usuário do Bootstrap, jQuery Mobile e Topcoat.</li>
  <li><strong>Start with a Blank Project:</strong> Como o próprio nome implica, essa opção nos dá um modelo de projeto em branco para iniciarmos. Essa será a opção que escolheremos para esse tutorial.</li>
</ul>

<p>Dê um nome para seu projeto e clique no botão <strong>Create</strong>. O XDK criará seu projeto bem como uma estrutura de diretórios.</p>

<h3>Passo 3: Estrutura do Projeto</h3>

<p>Embora tenhamos começado com um projeto em branco, o XDK inclui alguns arquivos para você iniciar. Editaremos esses arquivos para nosso projeto. </p>

<h4>Arquivo init-dev.js </h4>

<p>Esse arquivo é usado para detectar as várias bibliotecas em uso. Esse arquivo será usado da maneira como está, praticamente. Ele inclui várias declarações de registro de log para propósitos de depuração e para entender melhor como o arquivo funciona. A parte que mais estamos interessados começa na linha <strong>106</strong>.</p>

<pre class="brush: javascript">var evt = document.createEvent("Event") ;
evt.initEvent("app.Ready", false, false) ;
document.dispatchEvent(evt) ;</pre>

<p>A primeira linha cria um novo objeto de evento. Nós inicializamos esse objeto com o valor <code class="inline">"app.ready"</code>. A última linha despacha o evento para a DOM.</p>

<h4>Arquivo init-app.js</h4>

<p>Deletei a maior parte do conteúdo desse arquivo, exceto a parte que precisaremos. Garantiremos que as bibliotecas que precisamos serão carregadas e que o aparelho estará pronto antes de executarmos qualquer linha do nosso código. Lembra-se do evento <code class="inline">app.ready</code> do arquivo anterior?</p>

<pre class="brush: plain">document.addEventListener("app.Ready", app.initEvents, false) ;</pre>

<p>Os observadores de evento prestam atenção ao evento <code class="inline">app.ready</code> e chamam a função <code class="inline">initEvents</code> do objeto <code class="inline">app</code>.</p>

<pre class="brush: plain">app.initEvents = function() {
"use strict" ;
    var fName = "app.initEvents():" ;
    console.log(fName, "entry") ;
    $(".take").bind("click", takePic);
    document.addEventListener("intel.xdk.camera.picture.add",onSuccess);
} ;</pre>

<p>A função <code class="inline">initEvents</code> faz duas coisas. Primeiro, atrela um observador de eventos de clique ao botão, usando o <a href="http://jquery.com/" rel="external" target="_blank">jQuery</a>. Segundo, ele adiciona um observador de eventos para o evento <code class="inline">intel.xdk.camera.picture.add</code>.</p>

<h4>Arquivo app.js</h4>

<p>Esse arquivo contém a parte interessante do nosso aplicativo, com as funções que fazem nosso aplicativo rodar. A função <code class="inline">replacer</code> usa o jQuery para substituir a foto na página com a foto mais recente tirada pela câmera.</p>

<pre class="brush: plain">function replacer(pic) {
$("img").replaceWith(pic);
}</pre>

<p>O nome da função <code class="inline">takePic</code> é auto explicativo. Ele usa o <em>framework</em> XDK para capturar uma foto.</p>

<pre class="brush: plain">function takePic() {
intel.xdk.camera.takePicture(50,false,"jpg");
}
</pre>

<p>A função <code class="inline">onSuccess</code> é executada quando um evento do tipo <code class="inline">intel.xdk.camera.picture.add</code> é detectado. Se uma foto for bem sucedida em ser capturada, ele substituirá a imagem atual na página, usando a função <code class="inline">replacer</code> que vimos mais acima. Se o aplicativo não tiver conseguir capturar a foto, ele apresentará uma mensagem de erro.</p>

<pre class="brush: plain">function onSuccess(evt) {
if (evt.success == true) {
        var image = document.createElement('img');
        image.src=intel.xdk.camera.getPictureURL(evt.filename);
        image.setAttribute ("style","width:100%;height:200px;");
        image.id=evt.filename;
        replacer(image);
    }
    else {
        if (evt.message != undefined) {
            alert(evt.message);
    }
    else
    {
        alert("Erro ao tirar a foto");
    }
  }
}</pre>

<h4>Arquivo index.html</h4>

<p>Esse arquivo contém a página principal do nosso aplicativo. É um arquivo HTML simples onde carregamos o jQuery e jQuery Mobile.</p>

<pre class="brush: plain">&lt;script src="lib/jquery-2.1.1.js"&gt;&lt;/script&gt;
&lt;script src="lib/jquery.mobile-1.4.4/jquery.mobile-1.4.4.js"&gt;&lt;/script&gt;
</pre>

<p>Também importamos algumas folhas de estilo para embelezar o aplicativo. A folha de estilo customizada, <strong>app.css</strong>, tem pouca coisa de estilização. Isso se dá porque use o <a href="http://themeroller.jquerymobile.com/" rel="external" target="_blank">gerador de temas do jQuery Mobile</a> para estilizar o aplicativo.</p>

<pre class="brush: plain">&lt;link rel="stylesheet" href="lib/jquery.mobile-1.4.4/jquery.mobile-1.4.4.css"&gt;
&lt;link rel="stylesheet" href="css/themes/selfi.css"&gt;
&lt;link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css"&gt;
&lt;link rel="stylesheet" href="css/app.css"&gt;</pre>

<p>A página em si é uma página padrão do jQuery Mobile com seções para o cabeçalho, conteúdo e rodapé. Note a imagem dentro da <em>tag</em> <code class="inline">div#info</code>. Essa é a imagem que será substituída pela foto capturada com a câmera.</p>

<pre class="brush: plain">&lt;div data-role="page"&gt;
   &lt;div data-role="header"&gt;
           &lt;h1&gt;Selfi&lt;/h1&gt;
       &lt;/div&gt;
       &lt;div data-role="main" class="ui-content"&gt;
           &lt;div id="info"&gt;&lt;img src="img/vader-selfie.jpg"&gt;&lt;/div&gt;
           &lt;a class="take" data-role="button"&gt;Tire uma Selfi!&lt;/a&gt;
           &lt;/div&gt;
       &lt;div data-role="footer" data-position="fixed"&gt;
           &lt;h1&gt;&lt;/h1&gt;
       &lt;/div&gt;
    &lt;/div&gt;</pre>

<p>Esse é o código usado para depurar os aplicativos usando o pré-visualizador de aplicativos.</p>

<pre class="brush: plain">&lt;script src="http://debug-software.intel.com/target/target-script-min.js#Agu5iaiuw-i47vL-2_lk5pDOu3XL6fZm9sAm4apb__w"&gt;&lt;/script&gt;</pre>

<p>Também importamos um conjunto de códigos chave para o aplicativo, como o Cordova e o Intel XDK, e o <strong>app.js</strong>.</p>

<pre class="brush: plain">&lt;script src="intelxdk.js"&gt;&lt;/script&gt;     &lt;!-- Biblioteca fantasma, necessária para as chamadas da API do XDK --&gt;
&lt;script src="cordova.js"&gt;&lt;/script&gt;          &lt;!-- Biblioteca fantasma necessária para as chamadas da API do Cordova --&gt;
&lt;script src="xhr.js"&gt;&lt;/script&gt;              &lt;!-- Biblioteca fantasma, necessária para as chamadas CORS do XDK --&gt;
&lt;script src="js/app.js"&gt;&lt;/script&gt;
&lt;script src="js/init-dev.js"&gt;&lt;/script&gt;
&lt;script src="js/init-app.js"&gt;&lt;/script&gt;</pre>

<h2><span class="sectionnum">4.</span> Habilitando <em>Plugins</em></h2>

<p>Usaremos a API do Intel XDK para capturar fotos. Para fazer isso funcionar, precisaremos habilitar alguns <em>plugins</em>. Abra a aba <strong>Projects</strong> e, ao meio, você verá a opção <strong>CORDOVA 3.X HYBRID MOBILE APP SETTINGS</strong>. Clique no botão de mais, próximo aos <em>plugins</em> e permissões. À direita, sob o rótulo <strong>Intel XDK Plugins</strong>, marque <strong>Camera</strong>.</p>

<figure class="post_image">
  <img alt="Camera plugin" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/454/posts/22205/image/xdk-cameraplug-page.png"/>
  <figcaption>O <em>plugin</em> Camera</figcaption>
</figure>

<h2><span class="sectionnum">5.</span> Usando o emulador</h2>

<p>Clique no botão <strong>Emulate</strong> e teste a funcionalidade do aplicativo. Ao clicar no botão <strong>Tirar Selfi</strong>, ele deve mostrar a tela de captura de fotos. Após capturar uma foto, a foto recém tirada deve substituir a imagem do espaço reservado.</p>

<figure class="post_image">
  <img alt="Emulate" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/454/posts/22205/image/xdk-emulate-page.png"/>
  <figcaption>Emulador</figcaption>
</figure>

<h2><span class="sectionnum">6.</span> Testando o Aplicativo</h2>

<p>Baixe e instale o aplicativo <em>Intel App Preview</em> no <a href="https://play.google.com/store/apps/details?id=com.intel.html5tools.apppreview&amp;hl=en" rel="external" target="_blank">Google Play</a> ou na <a href="https://itunes.apple.com/app/intel-app-preview/id725023841?mt=8" rel="external" target="_blank">App Store</a> da Apple. Vá até a aba <strong>Test</strong> e copie o código da <em>tag</em> <strong>weinre</strong> se quiser depurar usando o <em>App Preview</em>. Clique no botão <strong>PUSH FILES</strong> para enviar seu aplicativo para os servidores da Intel. Acesse <em>App Preview</em> com suas credenciais do Intel XDK e escolha o aplicativo a ser enviado.</p>

<figure class="post_image">
  <img alt="Push" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/454/posts/22205/image/xdk-push.png"/>
</figure>

<h2><span class="sectionnum">7.</span> Construindo o Aplicativo</h2>

<p>Agora que temos um aplicativo testado, a última tarefa que temos é gerar o aplicativo para distribuição. Clique na aba <strong>Build</strong> para mostrar suas opções. Como pode ver, temos uma grande variedade de alvos para os quais gerar executáveis.</p>

<figure class="post_image">
  <img alt="Build choices" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/454/posts/22205/image/xdk-bld.png"/>
</figure>

<p>Já que usamos a API de Câmera, que é <strong>Legada</strong> (<em>Legacy</em>), escolheremos a criação de um aplicativo do tipo <strong>Legacy Hybrid</strong>. Isso nos levará para a página de criação mostrada abaixo.</p>

<figure class="post_image">
  <img alt="Build options" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/454/posts/22205/image/xdk-options.png"/>
</figure>

<p>Clicando em <strong>Details</strong> mostrará suas opções para cobrança dentro do aplicativo, transmissão de áudio, etc.</p>

<figure class="post_image">
  <img alt="Details" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/454/posts/22205/image/xdk-detail.png"/>
</figure>

<p>Após escolher as opções para seu aplicativo, clique no botão <em>build</em>. Após um tempo, o arquivo será criado e você verá uma janela que permitirá você baixar seu aplicativo.</p>

<figure class="post_image">
  <img alt="Success" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/454/posts/22205/image/xdk-success.png"/>
</figure>

<h2>Conclusão</h2>

<p>Acredito que você concorda que é fácil criar um aplicativo usando o Intel XDK. Seja você um veterano, um desenvolvedor completo ou está apenas iniciando no desenvolvimento, o Intel XDK ajuda você. É fácil aprender e seria bom que você desse uma chance ao Intel XDK.</p>