<h1>50 Ações Para WordPress – Introdução</h1>

<p>O motivo do WordPress ser o sistema de administração de conteúdo mais popular do mundo é sua flexibilidade, claro. A bela e simples estrutura dos "ganchos" dá ao WordPress essa capacidade. Sem os ganchos de filtro ou os de ação, o WordPress não seria tão extensível quanto é e nós não seríamos capazes de ter esse conjunto tão grande e diverso de temas e <em>plugins</em> para WordPress.</p>

<p>Nesta série, nós aprenderemos sobre as ações, o segundo tipo de gancho que o WordPress oferece. Durante a série, falaremos praticamente tudo que existe sobre ações:</p>

<ul>
  <li>Na primeira parte, que é esse artigo, aprenderemos o que são as ações do WordPress e como usá-las com sete funções padrão do WordPress.</li>
  <li>Na próxima parte, veremos um conjunto de exemplos de ações para WordPress. Em cada parte, veremos um grupo de 10 ações, aprendendo para que servem e trabalhando com um exemplo de cada uma.</li>
  <li>No final da série, recapitularemos o que aprendemos, bem como as 50 ações que fizemos.</li>
</ul>

<p>Será uma grande e incrível caminha. Prepare-se!</p>

<h2>O Que É Uma Ação para WordPress?</h2>

<p>As ações são definidas dessa maneira, <a href="http://codex.wordpress.org/Plugin_API#Actions">no Codex</a>:</p>

<blockquote>
  <p>Ações são ativadas por eventos específicos que acontecem no WordPress, como a publicação de um artigo, alteração de um tema, ou apresentação de uma <a href="http://codex.wordpress.org/Administration_Screens">tela administrativa</a>. Uma ação é uma função PHP customizada, definida em seu <em>plugin</em> (ou tema) e que é <em>atrelada</em>, ou seja, responde a alguns eventos.</p>
</blockquote>

<p>Assim, ações são funções ativadas por um evento do WordPress que são executadas antes ou depois deste evento. Ações são um dos dois tipos de "gancho" no WordPress – o outro tipo é chamado de "filtros", o qual já falamos um tempo atrás – <a href="http://code.tutsplus.com/tutorials/50-filters-of-wordpress-an-introduction-to-filters--cms-21294" title="50 Filters of WordPress: An Introduction to Filters">leia o "50 Filtros para WordPress"</a>, se quiser aprender mais sobre os filtros para WordPress.</p>

<h2>Usando Ações no WordPress</h2>

<p>Definir o que as ações são é a parte mais fácil desta série. Por sorte, aprender como criar e usar ações é quase tão fácil quanto. Vejamos como atrelar funções a ações, criar novas ações, remover algumas existentes e fazer outras coisas relacionadas a funções de ações na base do WordPress.</p>

<h3>Atrelando uma Função a uma Ação</h3>

<p>Esta deve ser a função mais fácil dentre todas: Ela é usada para atrelar nossa função a um gancho que usaremos:</p>

<pre class="brush: php">&lt;?php

add_action( $hook_name, $function_name, $priority, $arguments );

?&gt;</pre>

<p>Vejamos o que esses parâmetros significam:</p>

<ul>
  <li><code>$hook_name</code> é o nome do gancho de ação que usaremos</li>
  <li><code>$function_name</code> é o nome da nossa função</li>
  <li><code>$priority</code> é um número inteiro que especificamos para configurar o momento que a função deverá ser executada em seu gancho</li>
  <li><code>$arguments</code> é o número de argumentos que nossa função usa e que o gancho de ação permite</li>
</ul>

<p>Vejamos um exemplo rápido:</p>

<pre class="brush: php">&lt;?php

add_action( 'add_meta_boxes', 'my_function', 10, 2 );

function my_function( $post_type, $post ) {
	// faça alguma coisa com $post_type e $post
}

?&gt;</pre>

<p>Quase muito fácil, não é?</p>

<h3>Removendo Funções de um Gancho de Ação</h3>

<p>Nós temos duas funções para remover outras funções de ganchos de ação: <code>remove_action()</code> e <code>remove_all_actions()</code>. Vejamos como usá-las:</p>

<pre class="brush: php">&lt;?php

// remove_action( $hook_name, $function_name, $priority );
remove_action( 'login_enqueue_scripts', 'some_function', 10 );

// remove_all_actions( $hook_name, $priority
remove_all_actions( 'wp_enqueue_scripts', 10 );

?&gt;</pre>

<p>A função <code>remove_action()</code> leva três argumentos: o nome do gancho, o nome da função que removeremos <em>do</em> gancho, e a prioridade configurada ao usar a função <code>add_action()</code>. A função <code>remove_all_actions()</code> não tem o parâmetro <code>$function_name</code>, uma vez que ela remove todas as funções atreladas à ação.</p>

<h3>Criando um Gancho de Ação</h3>

<p>Se você desenvolve <em>plugins</em> ou temas, é uma boa prática criar alguns ganchos em seu código, de modo que outros desenvolvedores possam <em>estender</em> seu <em>plugin</em> ou tema. Para tanto, temos outras duas funções: <code>do_action()</code> e <code>do_action_ref_array()</code>. Vejamos como a primeira funciona:</p>

<pre class="brush: php">&lt;?php

do_action( $hook_name, $arg1, $arg2, /* ... */ $argN );

/*
 * Modo de Uso:
 *
 * add_action( hook_name, my_function )
 *
 * function my_function( $arg1, $arg2 ) {
 * // faz alguma coisa com $arg1, $arg2 e por aí vai
 * }
 *
 */

?&gt;</pre>

<p>Como pode ver, a função pode ter um número infinito de parâmetros, uma vez que você pode definir quantos argumentos quiser ou precisar. Se precisar manter os argumentos em um vetor, pode usar a segunda função mencionada:</p>

<pre class="brush: php">&lt;?php

$args = array( $arg1, $arg2, /* ... */ $argN );

do_action_ref_array( $hook_name, $args );

/*
 * Modo de Uso:
 *
 * add_action( hook_name, my_function )
 *
 * function my_function( $args ) {
 * // faz alguma coisa com $args[0], $args[1] e por aí vai
 * }
 *
 */

?&gt;</pre>

<h3>Retornando o Número de Vezes que Uma Ação é Disparada</h3>

<p>Se precisar saber quantas vezes uma ação é disparada, você pode usar essa função para contar quantas vezes a ação é chamada:</p>

<pre class="brush: php">&lt;?php

function tuts_foo() {
	$action_count = did_action( 'some_action_name' );
	if ( 1 === $action_count ) {
		// executa código se 'some_action_name' for disparada apenas uma vez
	}
}

?&gt;</pre>

<p>Como pode ver, o único parâmetro que a função leva é o nome do gancho de ação.</p>

<h3>Verificando Se Há Algo Atrelado à Ação</h3>

<p>Imagine que está desenvolvendo uma extensão para algum <em>plugin</em> popular do WordPress e precisa verificar se o usuário tem o <em>plugin</em> instalado ou não (Afinal, seu <em>plugin</em> não funcionará se o outro não estiver instalado e ativado). </p>

<p>Para verificar, você pode usar a função <code>has_action()</code> para garantir que a ação do tal <em>plugin</em> está disponível:</p>

<pre class="brush: php">&lt;?php

if( has_action( 'some_popular_plugin_action' ) {
	add_action( 'some_popular_plugin_action', 'extension_to_the_some_popular_plugin' );
} else {
	wp_die( 'Desculpe por quebrar seu site, mas precisamos do plugin "Nome do Plugin bem Popular" para funcionar.' );
	// CUIDADO: Isso é só uma brincadeira. Você não precisa parar um site porque seu plugin não está apto a funcionar.
}

?&gt;</pre>

<p>Assim como a função <code>did_action()</code>, a função <code>has_action()</code> leva apenas um parâmetro: o nome do gancho da ação.</p>

<h2>Conclusão</h2>

<p>Neste artigo, cobrimos praticamente tudo sobre a criação e uso de ações. Assim, podemos continuar com a jornada dos outros cinco artigos. Resenharemos <em>apenas</em> 50 delas, mas, caso esteja curioso, você poderá encontrar centenas mais na base do WordPress.</p>

<p>Espero que você curta esta série tanto quanto eu gostei de escrevê-la. Se achar que pode ajudar com os tutoriais, sugerindo outras ações ou pedindo por mais exemplos, não hesite em perguntar e compartilhar suas ideias na área de comentários. E, caso tenha gostado de ler esta série, não esqueça de compartilhar os artigos!</p>

<p>Vejo você no próximo artigo!</p>